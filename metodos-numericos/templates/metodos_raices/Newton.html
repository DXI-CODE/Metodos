<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Método de Newton-Raphson</title>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            document.getElementById("newton-form").addEventListener("submit", async function (event) {
                event.preventDefault();
                const datos = {
                    x0: parseFloat(document.getElementById("x0").value),
                    tol: parseFloat(document.getElementById("tol").value),
                    max_iter: parseInt(document.getElementById("max_iter").value),
                };

                try {
                    const response = await fetch("/newton", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify(datos),
                    });

                    const resultado = await response.json();
                    if (resultado.error) {
                        alert("Error: " + resultado.error);
                    } else {
                        document.getElementById("tabla-resultados").innerHTML = resultado.tabla;
                        document.getElementById("grafica").src = "data:image/png;base64," + resultado.grafica;
                        document.getElementById("raiz").innerText = `La raíz aproximada es: ${resultado.raiz.toFixed(6)}`;
                    }
                } catch (error) {
                    console.error("Error:", error);
                }
            });
        });
    </script>
</head>
<body>
    <h1>Método de Newton-Raphson</h1>
    <form id="newton-form">
        <label for="x0">Valor inicial (x0):</label>
        <input type="number" id="x0" step="any" required><br>

        <label for="tol">Tolerancia:</label>
        <input type="number" id="tol" step="any" required><br>

        <label for="max_iter">Iteraciones máximas:</label>
        <input type="number" id="max_iter" required><br>

        <button type="submit">Calcular</button>
    </form>

    <h2>Resultados:</h2>
    <p id="raiz"></p>
    <div id="tabla-resultados"></div>

    <h2>Gráfica del Método</h2>
    <img id="grafica" alt="Gráfica del Método de Newton-Raphson">
</body>
</html>
